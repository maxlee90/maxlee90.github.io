---
layout: post
bg: "tools.jpg"
title: "[Spring Boot] JPA에 의한 데이터베이스 사용하기"
crawlertitle: "[Spring Boot] JPA에 의한 데이터베이스 사용하기"
summary: "[Spring Boot] JPA에 의한 데이터베이스 사용하기"
date: 2019-03-12
slug: post-url
author: "Max Lee"
permalink: /Posts/SpringBoots/1
categories: posts
tags: 'Spring_Boot'
---

스프링 부트에선 스프링 프레임워크의 웹 애플리케이션 프레임워크인 '스프링 MVC'가 MVC 아키텍처의 핵심이 된다.
즉, 이 스프링 MVC를 사용하기 쉽게 구성한 것이 스프링 부트다. 

스프링 프레임워크는 다수의 프레임워크로 구성된 종합적인 프레임워크다. 사실 스프링 MVC 안에는 모델과 관련된 부분(데이터베이스 처리 기능)이 없다. 
또한 Java EE에는 JPA(Java Persistence API)라는 지속성을 위한 API도 존재한다. 
이러한 기능들을 활용하여 DB에 접속 관련 기능을 사용할 수 있다.

---
Controller -> Model/JPA -> DB

이러한 구조로 데이터베이스를 활용하기 위해서, 추가적인 기능이 필요하다. 
- HSQLDB(Hyper SQL Database) : 용량이 적고 사용이 쉽다는 장점을 가진 데이터베이스, 개발 단계 테스트용으로 사용하기 적합
- JTA(Java Transaction API) : Java EE에 트랜잭션 처리를 제공. 
- Spring ORM(Object-Relational Mapping) : 객체와 데이터베이스 테이블을 매핑해서 임피던스 불일치 문제를 해결해준다.
- Spring Aspects/Spring AOP : 스프링 프레임워크의 내부 프레임워크로, 이 안에 있는 기능들을 직접 호출해서 사용하는 것이 아니라 데이터베이스를 자유롭게
사용할 수 있게 백그라운드에서 동작하는 구조.

자바 모델을 작성할 경우, JPA를 이용하여 @Entity를 통해 데이터베이스의 데이터에 해당하는 부분임을 알려준다. 엔티티는 매우 단순한 구조(POJO)로 되어있다.

```
@Getter   //lombok annotation
@Setter   //lombok annotation
@Entity   // 엔티티
@Table(name="mydata")
public class MyData{
  @Id   // PK를 지정 (엔티티 설정시 반드시 설정해야 한다)
  @GeneratedValue(strategy = GenerationType.AUTO) // 자동 생성하는 역할을 한다.
  @Column //해당 필드에 할당할 컬럼을 지정하며 생략할 수 있다. 생략시 필드명이 그대로 칼럼명으로 사용된다.
  private long id;
  
  @Column(length = 50, nullable false)
  private String name;
  
  @Column(length = 200, nullable = true)
  private String mail;
}
```

---
