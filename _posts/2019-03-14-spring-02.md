---
layout: post
bg: "tools.jpg"
title: "[Spring Boot] Entity Manager를 이용한 데이터베이스 처리"
crawlertitle: "[Spring Boot] Entity Manager를 이용한 데이터베이스 처리"
summary: "[Spring Boot] Entity Manager를 이용한 데이터베이스 처리"
date: 2019-03-14
slug: post-url
author: "Max Lee"
permalink: /Posts/SpringBoots/2
categories: posts
tags: 'Spring_Boot'
---

스프링 부트의 데이터베이스 처리는 기본적으로 JPA를 기반으로 하고 있다. JPA는 Java EE의 기술로 데이터베이스 접속이나 데이터 지속화 관련 기능을 제공해준다.
이러한 JPA를 스프링 프레임워크에서 이용할 수 있도록 한 것이 'Spring Data JPA'라는 프레임워크이다.

### Data Access Object
각 Request마다 처리를 작성해야 한다면, 컨트롤러가 점점 비대해 질 수 있다. 또한, MVC라는 아키텍처는 '데이터와 로직을 분리'해서 설계하는 것이 
일반적이므로 데이터베이스 처리를 컨트롤러에 위임하는 것은 좋은 방법이 되지 못한다.

이러한 이유로 데이터베이스 접속에는 일반적으로 DAO라 불리는 객체를 사용한다. 이것은 Data Access Object로 데이터베이스 접속하기 위한 수단을 제공하는 객체다.
DAO에 데이터베이스 처리를 위한 기능들을 모아두고, 필요에 따라 컨트롤러에서 DAO 메서드를 호출해서 원하는 처리를 작성하는 것이다.

```
public interface MyDataDao <T> extends Serializable{
  public List<T> getAll();
}

public class MyDataDaoImpl implements MyDataDao<MyData>{
  private static final long serialVersionUID = 1L;
  
  private EntityManager entityManager;
  
  public MyDataDaoImpl(){
    super();
  }
  public MyDataDaoImpl(EntityManager manager){
    entityManager = manager;
  }
  
  @Override
  public List<MyData> getAll(){
    Query query = entityManager.createQuery("from MyData");
    List<MyData> list = query.getResultList();
    entityManager.close();
    return list;
  }
}
```

### Entity Manager & Query
Entity Manager는 엔티티 사용에 필요한 기능을 제공한다. 쿼리를 만들어서 데이터베이스 처리를 한다. 
JPA는 JPQL이라는 쿼리 
